<%- include('layout') %>
<div class="Auth">
    <form action="/auth/register" method="POST">
        <h1>Register</h1>
        <% if (errors.length > 0) { %>
            <div class="error-messages">
                <% errors.forEach(function(error) { %>
                    <p><%= error.msg %></p>
                <% }); %>
            </div>
        <% } %>
        <input type="text" name="username" placeholder="Username" required />
        <input type="email" name="email" placeholder="Email" required />
        <div class="input-box">
            <input type="password" id="password" name="password" placeholder="Password" required/>
            <span id="togglePassword" class="eye-icon"><i class="fas fa-eye"></i></span>
        </div>
        <div class="input-box">
            <input type="password" id="password2" name="password2" placeholder="Confirm Password" required/>
            <span id="togglePassword2" class="eye-icon"><i class="fas fa-eye"></i></span>
        </div>
        <button type="submit">Register</button>
        <p><a href="/auth/login">Already have an account? Login here</a></p>
    </form>
</div>

<script>
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');
    const togglePassword2 = document.getElementById('togglePassword2');
    const passwordInput2 = document.getElementById('password2');

    togglePassword.addEventListener('click', function () {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        this.querySelector('i').classList.toggle('fa-eye');
        this.querySelector('i').classList.toggle('fa-eye-slash');
    });
    togglePassword2.addEventListener('click', function () {
        const type = passwordInput2.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput2.setAttribute('type', type);
        this.querySelector('i').classList.toggle('fa-eye');
        this.querySelector('i').classList.toggle('fa-eye-slash');
    });
</script>